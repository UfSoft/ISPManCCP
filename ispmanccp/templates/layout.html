<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude"
      py:strip="">

<head py:match="head">
  <title py:with="title = unicode(select('title/text()'))">
    ${ ' - '.join(filter(None, [h._('Customer Control Pannel'), title])) }
  </title>

  <meta name="ROBOTS" content="NOINDEX, NOFOLLOW" />
  <meta http-equiv="PRAGMA" content="NO-CACHE" />
  <meta http-equiv="CACHE-CONTROL" content="NO-CACHE" />
  $page_custom_meta

  <!--! CSS Imports -->
  <!--! Sanityze CSS among browsers -->
  ${ h.stylesheet_link_tag('/style/initial.css') }
  <!--! Our Stylesheet -->
  ${ h.stylesheet_link_tag('/style/main.css') }
  $page_specific_css

  <!--! Include JavaScript Lib(s) -->
  ${ h.javascript_include_tag('/javascripts/effects.js', builtins=True) }
  ${ h.javascript_include_tag('/js/ispmanccp.js') }
  <!-- Support the DAM IE -->
  <!--[if lt IE 7]><script src="/js/ie7/ie7-standard-p.js" type="text/javascript"></script><![endif]-->
  <!--[if IE]>
  <style type="text/css">
    .user_search input { visibility: visible; }
  </style>
  <![endif]-->
  ${select("*|text()")}

</head>

<body py:match="body">
  <a name="top"></a>
  <noscript>
    <div style="border-bottom: 1px solid #808080">
      <div style="border-bottom: 1px solid #404040">
        <table width="100%" border="0" cellpadding="0" bgcolor="#FFFFE1">
          <tr>
            <td valign="middle"><img src="/images/warning.gif" alt="Warning" /></td>
            <td>&nbsp;</td>
            <td><span style=
                "padding: 0px; margin: 0px; font-family: Tahoma, sans-serif; font-size: 13px">
                ${ h._('Warning, your browser does not support JavaScript and is not ' +
                'capable of displaying the latest web pages such as those found on this ' +
                'site. Some of the functionality will be disabled.') }</span>
            </td>
          </tr>
        </table>
      </div>
    </div>
  </noscript>
  <div id="header">
    <!--[if IE]>
    <p style="color: yellow; font-weight: bold; padding: 10px; margin-right: 35px; margin-top: 15px;">
    You really shouldn't use IE.<br>Because of that I'll spend you some more
    bandwidth,<br>and I won't promisse this webtool will work in perfection.    </p>
    <![endif]-->
    <div id="spinner"></div>
    <!--!
    Main Navigation
    Is the user logged in? If so, sho him the menu
    -->
    <div id="mainnav" py:if="'REMOTE_USER' in request.environ">
      <ul>
        <!--! Loop all items on mainmenu.
              We add py:choose="" to be able to add or not the accesskey
              since the link's will be diferent
        -->
        <li py:for="name, url, akey in c.menus['mainmenu']" py:choose=""
          class="${h.get_nav_class_state(url, request, partial=True)}">
          <!--! We have an access key, let's underscore it on the name -->
          <a py:when="akey != None" py:with="pre, post = name.split(akey)"
            href="${url}" accesskey="${akey}"
            class="${h.get_nav_class_state(url, request, partial=True)}">$pre<u>${akey}</u>$post</a>
          <!--! No access key, so, plain simple link -->
          <a py:otherwise="" href="${url}"
            class="${h.get_nav_class_state(url, request, partial=True)}">${name}</a>
        </li>
      </ul>
    </div> <!--! div id=mainnav ended -->
  </div> <!--! div id=header ended -->
  <div id="ctxnav" py:if="('REMOTE_USER' in request.environ) and (c.controller in c.menus)">
    <ul>
      <!--! Loop all items on ctxnav. The science is the same used in mainnav -->
      <li py:for="name, url, akey in c.menus[c.controller]" py:choose=""
        class="${h.get_nav_class_state(url, request)}">
        <a py:when="akey != None" py:with="pre, post = name.split(akey)"
          href="${url}" accesskey="${akey}"
          class="${h.get_nav_class_state(url, request)}">$pre<u>${akey}</u>$post</a>
        <a py:otherwise="" href="${url}"
          class="${h.get_nav_class_state(url, request)}">${name}</a>
      </li>
    </ul>
  </div> <!--! div id=ctxnav ended -->
  <div id="contents">
    ${select("*|text()")}
  </div>
</body>
</html>
<!--!
$Id: layout.html 20 2006-10-25 02:56:07Z s0undt3ch $
vim: sw=2 ts=2 fenc=utf-8 ft=kid et
-->
